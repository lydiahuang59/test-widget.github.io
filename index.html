<!DOCTYPE html><html lang="en" ng-app="widgetApp"><head>
  <meta charset="UTF-8">
  <title>Widget Api Presentation</title>
  <!-- grunt embed task will embed content of workbench-widget-api.min.js into html -->
  <script>!function(t){"use strict";if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses)ses.ok()&&(ses.makeQ=t);else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var e="undefined"!=typeof window?window:self,n=e.Q;e.Q=t(),e.Q.noConflict=function(){return e.Q=n,this}}}(function(){"use strict";var r=!1;try{throw new Error}catch(v){r=!!v.stack}function e(){}var a,t,n,o,i,u,c,s,p,f=R(),l=(i=o={task:void 0,next:null},c=void 0,s=u=!1,p=[],l=function(t){i=i.next={task:t,domain:s&&process.domain,next:null},u||(u=!0,c())},c="object"==typeof process&&"[object process]"===process.toString()&&process.nextTick?(s=!0,function(){process.nextTick(y)}):"function"==typeof setImmediate?"undefined"!=typeof window?setImmediate.bind(window,y):function(){setImmediate(y)}:"undefined"!=typeof MessageChannel?((t=new MessageChannel).port1.onmessage=function(){c=n,(t.port1.onmessage=y)()},n=function(){t.port2.postMessage(0)},function(){setTimeout(y,0),n()}):function(){setTimeout(y,0)},l.runAfter=function(t){p.push(t),u||(u=!0,c())},l),d=Function.call;function y(){for(var t,e;o.next;)t=(o=o.next).task,o.task=void 0,(e=o.domain)&&(o.domain=void 0,e.enter()),h(t,e);for(;p.length;)h(t=p.pop());u=!1}function h(t,e){try{t()}catch(t){if(s)throw e&&e.exit(),setTimeout(y,0),e&&e.enter(),t;setTimeout(function(){throw t},0)}e&&e.exit()}function v(t){return function(){return d.apply(t,arguments)}}var m=v(Array.prototype.slice),g=v(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;n<r;n++)n in this&&(e=t(e,this[n],n));return e}),w=v(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),b=v(Array.prototype.map||function(r,o){var i=this,a=[];return g(i,function(t,e,n){a.push(r.call(o,e,n,i))},void 0),a}),j=Object.create||function(t){function e(){}return e.prototype=t,new e},k=Object.defineProperty||function(t,e,n){return t[e]=n.value,t},T=v(Object.prototype.hasOwnProperty),S=Object.keys||function(t){var e,n=[];for(e in t)T(t,e)&&n.push(e);return n},A=v(Object.prototype.toString),x="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t},O="From previous event:";function C(t,e){if(r&&e.stack&&"object"==typeof t&&null!==t&&t.stack){for(var i=[],n=e;n;n=n.source)n.stack&&(!t.__minimumStackCounter__||t.__minimumStackCounter__>n.stackCounter)&&(k(t,"__minimumStackCounter__",{value:n.stackCounter,configurable:!0}),i.unshift(n.stack));i.unshift(t.stack);e=function(){for(var t,e=i.join("\n"+O+"\n").split("\n"),n=[],r=0;r<e.length;++r){var o=e[r];!function(t){var e=N(t);if(!e)return!1;t=e[0],e=e[1];return t===a&&f<=e&&e<=tt}(o)&&-1===(t=o).indexOf("(module.js:")&&-1===t.indexOf("(node.js:")&&o&&n.push(o)}return n.join("\n")}();k(t,"stack",{value:e,configurable:!0})}}function N(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];e=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(e)return[e[1],Number(e[2])];t=/.*@(.+):(\d+)$/.exec(t);return t?[t[1],Number(t[2])]:void 0}function R(){if(r)try{throw new Error}catch(t){var e=t.stack.split("\n"),e=N(0<e[0].indexOf("@")?e[1]:e[2]);return e?(a=e[0],e[1]):void 0}}function U(t){return t instanceof M?t:_(t)?(e=t,n=E(),U.nextTick(function(){try{e.then(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}}),n.promise):H(t);var e,n}(U.resolve=U).nextTick=l,U.longStackSupport=!1;var P=1;function E(){var o,i=[],a=[],t=j(E.prototype),e=j(M.prototype);if(e.promiseDispatch=function(t,e,n){var r=m(arguments);i?(i.push(r),"when"===e&&n[1]&&a.push(n[1])):U.nextTick(function(){o.promiseDispatch.apply(o,r)})},e.valueOf=function(){if(i)return e;var t=I(o);return Q(t)&&(o=t),t},e.inspect=function(){return o?o.inspect():{state:"pending"}},U.longStackSupport&&r)try{throw new Error}catch(t){e.stack=t.stack.substring(t.stack.indexOf("\n")+1),e.stackCounter=P++}function n(n){o=n,U.longStackSupport&&r&&(e.source=n),g(i,function(t,e){U.nextTick(function(){n.promiseDispatch.apply(n,e)})},void 0),a=i=void 0}return t.promise=e,t.resolve=function(t){o||n(U(t))},t.fulfill=function(t){o||n(H(t))},t.reject=function(t){o||n(V(t))},t.notify=function(n){o||g(a,function(t,e){U.nextTick(function(){e(n)})},void 0)},t}function F(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=E();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function D(o){return F(function(t,e){for(var n=0,r=o.length;n<r;n++)U(o[n]).then(t,e)})}function M(o,i,e){void 0===i&&(i=function(t){return V(new Error("Promise does not support operation: "+t))}),void 0===e&&(e=function(){return{state:"unknown"}});var t,a=j(M.prototype);return a.promiseDispatch=function(t,e,n){var r;try{r=o[e]?o[e].apply(a,n):i.call(a,e,n)}catch(t){r=V(t)}t&&t(r)},(a.inspect=e)&&("rejected"===(t=e()).state&&(a.exception=t.reason),a.valueOf=function(){var t=e();return"pending"===t.state||"rejected"===t.state?a:t.value}),a}function L(t,e,n,r){return U(t).then(e,n,r)}function I(t){if(Q(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function Q(t){return t instanceof M}function _(t){return t===Object(t)&&"function"==typeof t.then}"object"==typeof process&&process&&process.env&&process.env.Q_DEBUG&&(U.longStackSupport=!0),(U.defer=E).prototype.makeNodeResolver=function(){var n=this;return function(t,e){t?n.reject(t):2<arguments.length?n.resolve(m(arguments,1)):n.resolve(e)}},U.Promise=F,(U.promise=F).race=D,F.all=K,F.reject=V,(F.resolve=U).passByCopy=function(t){return t},M.prototype.passByCopy=function(){return this},U.join=function(t,e){return U(t).join(e)},M.prototype.join=function(t){return U([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Q can't join: not the same: "+t+" "+e)})},U.race=D,M.prototype.race=function(){return this.then(U.race)},(U.makePromise=M).prototype.toString=function(){return"[object Promise]"},M.prototype.then=function(e,n,o){var r=this,i=E(),a=!1;return U.nextTick(function(){r.promiseDispatch(function(t){a||(a=!0,i.resolve(function(t){try{return"function"==typeof e?e(t):t}catch(t){return V(t)}}(t)))},"when",[function(t){a||(a=!0,i.resolve(function(t){if("function"==typeof n){C(t,r);try{return n(t)}catch(t){return V(t)}}return V(t)}(t)))}])}),r.promiseDispatch(void 0,"when",[void 0,function(t){var e,n,r=!1;try{n=t,e="function"==typeof o?o(n):n}catch(t){if(r=!0,!U.onerror)throw t;U.onerror(t)}r||i.notify(e)}]),i.promise},U.tap=function(t,e){return U(t).tap(e)},M.prototype.tap=function(e){return e=U(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},U.when=L,M.prototype.thenResolve=function(t){return this.then(function(){return t})},U.thenResolve=function(t,e){return U(t).thenResolve(e)},M.prototype.thenReject=function(t){return this.then(function(){throw t})},U.thenReject=function(t,e){return U(t).thenReject(e)},U.nearer=I,U.isPromise=Q,U.isPromiseAlike=_,U.isPending=function(t){return Q(t)&&"pending"===t.inspect().state},M.prototype.isPending=function(){return"pending"===this.inspect().state},U.isFulfilled=function(t){return!Q(t)||"fulfilled"===t.inspect().state},M.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},U.isRejected=function(t){return Q(t)&&"rejected"===t.inspect().state},M.prototype.isRejected=function(){return"rejected"===this.inspect().state};var B,$=[],W=[],J=[],G=!0;function z(){$.length=0,W.length=0,G=G||!0}function V(r){var t,e,n=M({when:function(t){return t&&(e=this,!G||-1!==(n=w(W,e))&&("object"==typeof process&&"function"==typeof process.emit&&U.nextTick.runAfter(function(){var t=w(J,e);-1!==t&&(process.emit("rejectionHandled",$[n],e),J.splice(t,1))}),W.splice(n,1),$.splice(n,1))),t?t(r):this;var e,n}},function(){return this},function(){return{state:"rejected",reason:r}});return t=n,e=r,G&&("object"==typeof process&&"function"==typeof process.emit&&U.nextTick.runAfter(function(){-1!==w(W,t)&&(process.emit("unhandledRejection",e,t),J.push(t))}),W.push(t),e&&void 0!==e.stack?$.push(e.stack):$.push("(no stack) "+e)),n}function H(n){return M({when:function(){return n},get:function(t){return n[t]},set:function(t,e){n[t]=e},delete:function(t){delete n[t]},post:function(t,e){return null==t?n.apply(void 0,e):n[t].apply(n,e)},apply:function(t,e){return n.apply(t,e)},keys:function(){return S(n)}},void 0,function(){return{state:"fulfilled",value:n}})}function Z(t,e,n){return U(t).spread(e,n)}function q(t,e,n){return U(t).dispatch(e,n)}function K(t){return L(t,function(o){var i=0,a=E();return g(o,function(t,e,n){var r;Q(e)&&"fulfilled"===(r=e.inspect()).state?o[n]=r.value:(++i,L(e,function(t){o[n]=t,0==--i&&a.resolve(o)},a.reject,function(t){a.notify({index:n,value:t})}))},void 0),0===i&&a.resolve(o),a.promise})}function X(o){if(0===o.length)return U.resolve();var i=U.defer(),a=0;return g(o,function(t,e,n){var r=o[n];a++,L(r,function(t){i.resolve(t)},function(t){0==--a&&((t=t||new Error(""+t)).message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+t.message,i.reject(t))},function(t){i.notify({index:n,value:t})})},void 0),i.promise}function Y(t){return L(t,function(t){return t=b(t,U),L(K(b(t,function(t){return L(t,e,e)})),function(){return t})})}U.resetUnhandledRejections=z,U.getUnhandledReasons=function(){return $.slice()},U.stopUnhandledRejectionTracking=function(){z(),G=!1},z(),U.reject=V,U.fulfill=H,U.master=function(n){return M({isDef:function(){}},function(t,e){return q(n,t,e)},function(){return U(n).inspect()})},U.spread=Z,M.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},U.async=function(e){return function(){function t(t,e){var n,r;if("undefined"==typeof StopIteration){try{n=o[t](e)}catch(t){return V(t)}return n.done?U(n.value):L(n.value,i,a)}try{n=o[t](e)}catch(t){return"[object StopIteration]"===A(r=t)||r instanceof x?U(t.value):V(t)}return L(n,i,a)}var o=e.apply(this,arguments),i=t.bind(t,"next"),a=t.bind(t,"throw");return i()}},U.spawn=function(t){U.done(U.async(t)())},U.return=function(t){throw new x(t)},U.promised=function(n){return function(){return Z([this,K(arguments)],function(t,e){return n.apply(t,e)})}},U.dispatch=q,M.prototype.dispatch=function(t,e){var n=this,r=E();return U.nextTick(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},U.get=function(t,e){return U(t).dispatch("get",[e])},M.prototype.get=function(t){return this.dispatch("get",[t])},U.set=function(t,e,n){return U(t).dispatch("set",[e,n])},M.prototype.set=function(t,e){return this.dispatch("set",[t,e])},U.del=U.delete=function(t,e){return U(t).dispatch("delete",[e])},M.prototype.del=M.prototype.delete=function(t){return this.dispatch("delete",[t])},U.mapply=U.post=function(t,e,n){return U(t).dispatch("post",[e,n])},M.prototype.mapply=M.prototype.post=function(t,e){return this.dispatch("post",[t,e])},U.send=U.mcall=U.invoke=function(t,e){return U(t).dispatch("post",[e,m(arguments,2)])},M.prototype.send=M.prototype.mcall=M.prototype.invoke=function(t){return this.dispatch("post",[t,m(arguments,1)])},U.fapply=function(t,e){return U(t).dispatch("apply",[void 0,e])},M.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},U.try=U.fcall=function(t){return U(t).dispatch("apply",[void 0,m(arguments,1)])},M.prototype.fcall=function(){return this.dispatch("apply",[void 0,m(arguments)])},U.fbind=function(t){var e=U(t),n=m(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(m(arguments))])}},M.prototype.fbind=function(){var t=this,e=m(arguments);return function(){return t.dispatch("apply",[this,e.concat(m(arguments))])}},U.keys=function(t){return U(t).dispatch("keys",[])},M.prototype.keys=function(){return this.dispatch("keys",[])},U.all=K,M.prototype.all=function(){return K(this)},U.any=X,M.prototype.any=function(){return X(this)},U.allResolved=(B=Y,function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("allResolved is deprecated, use allSettled instead.",new Error("").stack),B.apply(B,arguments)}),M.prototype.allResolved=function(){return Y(this)},U.allSettled=function(t){return U(t).allSettled()},M.prototype.allSettled=function(){return this.then(function(t){return K(b(t,function(t){function e(){return t.inspect()}return(t=U(t)).then(e,e)}))})},U.fail=U.catch=function(t,e){return U(t).then(void 0,e)},M.prototype.fail=M.prototype.catch=function(t){return this.then(void 0,t)},U.progress=function(t,e){return U(t).then(void 0,void 0,e)},M.prototype.progress=function(t){return this.then(void 0,void 0,t)},U.fin=U.finally=function(t,e){return U(t).finally(e)},M.prototype.fin=M.prototype.finally=function(e){if(!e||"function"!=typeof e.apply)throw new Error("Q can't apply finally callback");return e=U(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},U.done=function(t,e,n,r){return U(t).done(e,n,r)},M.prototype.done=function(t,e,n){var r=function(t){U.nextTick(function(){if(C(t,o),!U.onerror)throw t;U.onerror(t)})},o=t||e||n?this.then(t,e,n):this;"object"==typeof process&&process&&process.domain&&(r=process.domain.bind(r)),o.then(void 0,r)},U.timeout=function(t,e,n){return U(t).timeout(e,n)},M.prototype.timeout=function(t,e){var n=E(),r=setTimeout(function(){e&&"string"!=typeof e||((e=new Error(e||"Timed out after "+t+" ms")).code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},U.delay=function(t,e){return void 0===e&&(e=t,t=void 0),U(t).delay(e)},M.prototype.delay=function(n){return this.then(function(t){var e=E();return setTimeout(function(){e.resolve(t)},n),e.promise})},U.nfapply=function(t,e){return U(t).nfapply(e)},M.prototype.nfapply=function(t){var e=E(),t=m(t);return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},U.nfcall=function(t){var e=m(arguments,1);return U(t).nfapply(e)},M.prototype.nfcall=function(){var t=m(arguments),e=E();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},U.nfbind=U.denodeify=function(n){if(void 0===n)throw new Error("Q can't wrap an undefined function");var r=m(arguments,1);return function(){var t=r.concat(m(arguments)),e=E();return t.push(e.makeNodeResolver()),U(n).fapply(t).fail(e.reject),e.promise}},M.prototype.nfbind=M.prototype.denodeify=function(){var t=m(arguments);return t.unshift(this),U.denodeify.apply(void 0,t)},U.nbind=function(n,r){var o=m(arguments,2);return function(){var t=o.concat(m(arguments)),e=E();return t.push(e.makeNodeResolver()),U(function(){return n.apply(r,arguments)}).fapply(t).fail(e.reject),e.promise}},M.prototype.nbind=function(){var t=m(arguments,0);return t.unshift(this),U.nbind.apply(void 0,t)},U.nmapply=U.npost=function(t,e,n){return U(t).npost(e,n)},M.prototype.nmapply=M.prototype.npost=function(t,e){var n=m(e||[]),e=E();return n.push(e.makeNodeResolver()),this.dispatch("post",[t,n]).fail(e.reject),e.promise},U.nsend=U.nmcall=U.ninvoke=function(t,e){var n=m(arguments,2),r=E();return n.push(r.makeNodeResolver()),U(t).dispatch("post",[e,n]).fail(r.reject),r.promise},M.prototype.nsend=M.prototype.nmcall=M.prototype.ninvoke=function(t){var e=m(arguments,1),n=E();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},U.nodeify=function(t,e){return U(t).nodeify(e)},M.prototype.nodeify=function(e){if(!e)return this;this.then(function(t){U.nextTick(function(){e(null,t)})},function(t){U.nextTick(function(){e(t)})})},U.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var tt=R();return U}),"function"!=typeof JSON.decycle&&(JSON.decycle=function(t){"use strict";var a=[],u=[];return function t(e,n){var r,o,i;if("object"!=typeof e||null===e||e instanceof Boolean||e instanceof Date||e instanceof Number||e instanceof RegExp||e instanceof String)return e;for(r=0;r<a.length;r+=1)if(a[r]===e)return{$ref:u[r]};if(a.push(e),u.push(n),"[object Array]"===Object.prototype.toString.apply(e))for(i=[],r=0;r<e.length;r+=1)i[r]=t(e[r],n+"["+r+"]");else for(o in i={},e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=t(e[o],n+"["+JSON.stringify(o)+"]"));return i}(t,"$")}),"function"!=typeof JSON.retrocycle&&(JSON.retrocycle=function retrocycle($){"use strict";var px=/^\$(?:\[(?:\d+|\"(?:[^\\\"\u0000-\u001f]|\\([\\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*\")\])*$/;return function rez(value){var i,item,name,path;if(value&&"object"==typeof value)if("[object Array]"===Object.prototype.toString.apply(value))for(i=0;i<value.length;i+=1)item=value[i],item&&"object"==typeof item&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[i]=eval(path):rez(item));else for(name in value)"object"==typeof value[name]&&(item=value[name],item&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[name]=eval(path):rez(item)))}($),$}),function(){"use strict";var a,n,r=1,o={};function i(t,e){var n=l(a,"callAction"),r=y([{name:"action",type:"String"},{name:"data",type:"Object"}],arguments,"callAction");if(r.valid)return n.data.action=r.argumentsObj.action,n.data.data=r.argumentsObj.data,d(n)}function u(t,e,n){t=l(t,"getBackendData");return t.data.backendArguments=n,t.data.backendFunction=e,d(t)}function c(r){return function(t,e){var n=y([{name:"taskGraphUri",type:"String"},{name:"itemUri",type:"String"}],arguments,r);if(n.valid)return u(a,r,n.argumentsObj)}}function s(i){return function(t,e,n,r){var o=y([{name:"taskGraphUri",type:"String"},{name:"itemUri",type:"String"},{name:"limit",type:"Number",optional:!0},{name:"offset",type:"Number",optional:!0}],arguments,i);if(o.valid)return u(a,i,o.argumentsObj)}}function p(n){return function(t){var e=y([{name:"taskGraphUri",type:"String"}],arguments,n);if(e.valid)return u(a,n,e.argumentsObj)}}function f(t){return null==t}function l(t,e){return{type:"action",key:e,data:{widgetId:t}}}function d(t){var e=t.data.widgetId+"_"+ ++r;return t.data.tag=e,o[e]=Q.defer(),window.top.postMessage(JSON.decycle(t),"*"),h("postMessage",t),o[e].promise}function y(t,o,e){var i=[],a={};if(t.length&&t.forEach(function(t,e){var n,r=o[e];t.optional&&f(r)||(r=r,n=t.type,Object.prototype.toString.call(r)==="[object "+n+"]")?(n=t.name,e=o[e],t.optional&&f(e)||(a[n]=e)):i.push("Argument '"+t.name+"' needs to be of '"+t.type+"' type.")}),i.length)throw i.unshift("Api function '"+e+"' arguments list is invalid."),new Error(i.join("\n"));return{valid:!i.length,argumentsObj:a}}function h(){n&&console.log.apply(this,arguments)}window.addEventListener("message",function(t){h("receiveMessage",t),t.data.tag&&o[t.data.tag]&&("response"===t.data.type&&(void 0!==t.data.results?o[t.data.tag].resolve(JSON.retrocycle(t.data.results)):void 0!==t.data.reason?o[t.data.tag].reject(JSON.retrocycle(t.data.reason)):function(){n&&console.error.apply(this,arguments)}("Response message need results or reason in data.")),delete o[t.data.tag])},!1),window.WorkbenchWidgetApi=function(t,e){return a=t||decodeURIComponent(window.location.hash.substr(1).replace(/^\//,"").replace(/\+/g," ")),n=e,d(l(a,"ready")),{widgetId:a,getStateParams:function(){return d(l(a,"getStateParams"))},navigateToItem:function(t){var e=l(a,"navigateToItem"),n=y([{name:"item",type:"Object"}],arguments,"navigateToItem");if(n.valid)return e.data.item=n.argumentsObj.item,d(e)},closeWidget:function(){return d(l(a,"closeWidget"))},openWidget:function(t){t=l(t,"openWidget");if(y([{name:"targetWidgetId",type:"String"}],arguments,"openWidget").valid)return d(t)},getClasses:p("getClasses"),getAssociativeUnfilteredTypes:p("getAssociativeUnfilteredTypes"),getAssociativeTypes:c("getAssociativeTypes"),getBroaderUnfilteredTypes:p("getBroaderUnfilteredTypes"),getBroaderTypes:c("getBroaderTypes"),getNarrowerUnfilteredTypes:p("getNarrowerUnfilteredTypes"),getNarrowerTypes:c("getNarrowerTypes"),getSemaphoreSettings:p("getSemaphoreSettings"),getAltLabelUnfilteredProperties:c("getAltLabelUnfilteredProperties"),getAltLabelProperties:c("getAltLabelProperties"),getMetadataUnfilteredTypes:c("getMetadataUnfilteredTypes"),getMetadataTypes:c("getMetadataTypes"),getDetailsWithMetadata:c("getDetailsWithMetadata"),getMetadataForDomain:(r="getMetadataForDomain",function(t,e){var n=y([{name:"taskGraphUri",type:"String"},{name:"domainUri",type:"String"}],arguments,r);if(n.valid)return u(a,r,n.argumentsObj)}),getConceptSchemes:p("getConceptSchemes"),getConceptDetails:c("getConceptDetails"),getConceptGuid:c("getConceptGuid"),getConceptPrefLabels:c("getConceptPrefLabels"),getConceptAltLabels:c("getConceptAltLabels"),getConceptRelated:s("getConceptRelated"),getConceptNarrower:s("getConceptNarrower"),getConceptBroader:s("getConceptBroader"),getTopConcepts:s("getTopConcepts"),actions:{call:i,showFormAddPrefLabel:function(t,e){return i("showFormAddPrefLabel",{name:t,langCode:e})},showFormAddAltLabel:function(t,e,n){return i("showFormAddAltLabel",{name:t,langCode:e,typeUri:n})},showFormAddMultipleAltLabel:function(t,e,n){return i("showFormAddMultipleAltLabel",{names:t,langCode:e,typeUri:n})},showFormAddRelated:function(t,e,n){return i("showFormAddRelated",{typeUri:t,targetUri:e,targetName:n})},showFormAddBroader:function(t,e,n){return i("showFormAddBroader",{typeUri:t,targetUri:e,targetName:n})},showFormAddNarrower:function(t,e,n){return i("showFormAddNarrower",{typeUri:t,targetUri:e,targetName:n})}}};var r}}();</script>
  <script src="//code.jquery.com/jquery-2.2.1.min.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

  <link rel="stylesheet" href="https://bootswatch.com/lumen/bootstrap.min.css">
  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
  <script>
    var widgetApp = angular.module("widgetApp", []);
    var api = new WorkbenchWidgetApi();
    widgetApp.controller("mainCtrl", function ($scope) {

      $scope.data = {};
      $scope.taskGraphUri = "...";
      $scope.goToConcept = "...";
      $scope.goToConceptScheme = "...";
      $scope.goToRelationship = "...";

      $scope.getCurrentTaskUri = function () {
        return api.getStateParams();
      };

      $scope.navigateToItem = function (item) {
        api.navigateToItem(item);
      };

      $scope.closeWidget = function () {
        api.closeWidget();
      };

      $scope.openWidget = function (targetWidgetId) {
        api.openWidget(targetWidgetId);
      };

      $scope.getBackendData = function (dataSource) {
        return dataSource.example().then(function success (results) {
          $scope.data[dataSource.name + "Results"] = JSON.decycle(results);
          $scope.$apply();
        }, function error (reason) {
          $scope.data[dataSource.name + "Error"] = JSON.decycle(reason);
          $scope.$apply();
        });
      };

      $scope.fetchTopConceptOf = function (conceptScheme) {
        api.getTopConcepts($scope.stateParams.taskGraphUri, conceptScheme["@id"]).then(function (results) {
          $scope.goToConcept = Object.assign(
            {"meta:transitiveType": ["skos:Concept"]},
            results["skos:hasTopConcept"][Math.floor(results["skos:hasTopConcept"].length * Math.random())]
          );
          $scope.$apply();
        });
      };

      $scope.fetchInitialData = function () {
        api.getConceptSchemes($scope.stateParams.taskGraphUri).then(function (results) {
          $scope.goToConceptScheme = Object.assign(
            {"meta:transitiveType": ["skos:ConceptScheme"]},
            results[Math.floor(results.length * Math.random())]
          );
          $scope.$apply();
          $scope.fetchTopConceptOf($scope.goToConceptScheme);
        });
        api.getNarrowerUnfilteredTypes($scope.stateParams.taskGraphUri).then(function (results) {
          $scope.goToRelationship = Object.assign(
            {"meta:transitiveType": ["rdf:Property"], "meta:transitiveSubPropertyOf": [{"@id": "skos:narrower"}]},
            results[Math.floor(results.length * Math.random())]
          );
          $scope.$apply();
        });
      };

      $scope.callAction = function () {
        var name = arguments[0];
        var params = Array.prototype.slice.call(arguments, 1);
        api.actions[name].apply(this, params);
      };

      $scope.getCurrentTaskUri().then(function (stateParams) {
        $scope.stateParams = stateParams;
        prepareDataSources();
        $scope.fetchInitialData();
        $scope.$apply();
      });

      $scope.getValueForProperty = function(propertyURI) {
        api["getMetadataForDomain"]($scope.stateParams.taskGraphUri, propertyURI).then(function success (results) {
          $scope.data["propertyResult"] = JSON.decycle(results);
          $scope.$apply();
        }, function error (reason) {
          $scope.data["propertyError"] = JSON.decycle(reason);
          $scope.$apply();
        });
      }

      function prepareDataSources () {


        var config = {
            showLoadingOverlay: false
          },
          dataSourceWitNoParameters = ["getClasses", "getAssociativeUnfilteredTypes", "getBroaderUnfilteredTypes", "getNarrowerUnfilteredTypes", "getSemaphoreSettings"],
          dataSourceWithItemUri = ["getAssociativeTypes", "getAltLabelProperties", "getAltLabelUnfilteredProperties", "getBroaderTypes", "getMetadataTypes", "getNarrowerTypes"],
          dataSourceWithItemAndDomainUri = ["getMetadataForDomain"],
          dataSourcesWithTaskUri = ["getConceptSchemes"],
          dataSourcesWithTaskAndItemUri = ["getConceptDetails", "getConceptGuid", "getConceptPrefLabels", "getDetailsWithMetadata", "getConceptAltLabels"],
          dataSourcesWithTaskAndItemUriAndPaging = ["getConceptRelated", "getConceptNarrower", "getConceptBroader", "getTopConcepts"];
        $scope.dataSources = [];
        dataSourceWitNoParameters.forEach(function (dataSource) {
          $scope.dataSources.push({
            name: dataSource,
            help: "api." + dataSource + "()",
            example: function () {
              api[dataSource]($scope.stateParams.taskGraphUri)
            }
          });
        });
        dataSourceWithItemUri.forEach(function (dataSource) {
          $scope.dataSources.push({
            name: dataSource,
            help: "api." + dataSource + "(itemUri)",
            example: function () {
              return api[dataSource]($scope.stateParams.taskGraphUri, $scope.stateParams.itemUri)
            }
          });
        });
        dataSourcesWithTaskAndItemUri.forEach(function (dataSource) {
          $scope.dataSources.push({
            name: dataSource,
            help: "api." + dataSource + "(taskGraphUri, itemUri)",
            example: function () {
              return api[dataSource]($scope.stateParams.taskGraphUri, $scope.stateParams.itemUri)
            }
          });
        });
        dataSourcesWithTaskAndItemUriAndPaging.forEach(function (dataSource) {
          $scope.dataSources.push({
            name: dataSource,
            help: "api." + dataSource + "(taskGraphUri, itemUri, limit, offset)",
            example: function () {
              return api[dataSource]($scope.stateParams.taskGraphUri, $scope.stateParams.itemUri, 5, 0)
            }
          });
        });
        dataSourceWithItemAndDomainUri.forEach(function (dataSource) {
          $scope.dataSources.push({
            name: dataSource,
            help: "api." + dataSource + "(taskGraphUri, domainUri)",
            example: function () {
              return api[dataSource]($scope.stateParams.taskGraphUri, "skos:Concept")
            }
          });
        });
        dataSourcesWithTaskUri.forEach(function (dataSource) {
          $scope.dataSources.push({
            name: dataSource,
            help: "api." + dataSource + "(taskGraphUri)",
            example: function () {
              return api[dataSource]($scope.stateParams.taskGraphUri)
            }
          });
        });

      }
    });
  </script>
</head>
<body ng-controller="mainCtrl" class="container">
<header class="header bg-info">
  <div class="row">
    <div class="col-xs-10">
      <p class="m-t"></p>
    </div>
    <div class="col-xs-2 text-right">
      <a class="close m-t" uib-tooltip="Close" tooltip-placement="bottom" ng-click="closeWidget();">×</a>
    </div>
  </div>
</header>
<h1>Demo Widget</h1>

<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
  <div class="panel panel-default">
    <div class="panel-heading" role="tab">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#getUri" aria-expanded="true" aria-controls="getUri">
          Get current modelGraphUri, taskGraphUri and itemUri
        </a>
      </h4>
    </div>
    <div id="getUri" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
      <div class="panel-body">
        <dl class="dl-horizontal">
          <dt>modelGraphUri</dt>
          <dd><span class="label label-success">{{ stateParams.modelGraphUri }}</span>
          </dd>
          <dt>taskGraphUri</dt>
          <dd><span class="label label-success">{{ stateParams.taskGraphUri }}</span>
          </dd>
          <dt>itemUri</dt>
          <dd><span class="label label-success">{{ stateParams.itemUri }}</span>
          </dd>
        </dl>
      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingTwo">
      <h4 class="panel-title">
        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
          Get data api
        </a>
      </h4>
    </div>
    <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
      <div class="panel-body">
        <div ng-repeat="dataSource in dataSources">
          <h3>{{ dataSource.name }}
            <button class="btn btn-xs" ng-click="dataSource.showExample = !dataSource.showExample">
              example
            </button>
          </h3>
          <pre class="bg-info" ng-if="dataSource.showExample">{{ dataSource.help   | json }}</pre>
          <button class="btn btn-primary btn-xs" ng-click="getBackendData(dataSource)">load real data
          </button>
          <pre ng-if="data[dataSource.name + 'Results']" style="max-height: 250px;" class="bg-success">{{ data[dataSource.name + "Results"]  | json }}</pre>
          <pre ng-if="data[dataSource.name + 'Error']" class="bg-danger">{{ data[dataSource.name + "Error"]  | json}}</pre>
        </div>
      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingThree">
      <h4 class="panel-title">
        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
          Send command api

        </a>
      </h4>
    </div>
    <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
      <div class="panel-body">
        <h3>Navigate to item</h3>


        <div>
          <h2>random concept</h2>
          <pre style="height: 100px;">{{ goToConcept | json }}</pre>
          <button ng-click="navigateToItem(goToConcept)" class="btn btn-xs">go
            to concept
          </button>
        </div>
        <div>
          <h2>random concept scheme</h2>
          <pre style="height: 100px;">{{ goToConceptScheme | json }}</pre>
          <button ng-click="navigateToItem(goToConceptScheme)" class="btn btn-xs">go to concept scheme
          </button>
        </div>
        <div>
          <h2>random relationship</h2>
          <pre style="height: 100px;">{{ goToRelationship | json }}</pre>
          <button ng-click="navigateToItem(goToRelationship)" class="btn btn-xs">go to relationship
          </button>
        </div>
        <hr>

        <button ng-click="openWidget('http://myCompany.com/#WidgetWikipedia')" class="btn btn-xs">Open widget 'Wikipedia'
        </button>

        <button ng-click="closeWidget()" class="btn btn-xs">Close widget
        </button>
        <hr>


      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingFour">
      <h4 class="panel-title">
        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
          Call action api

        </a>
      </h4>
    </div>
    <div id="collapseFour" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
      <div class="panel-body">
        <h3>Call action api</h3>

        <div>
          <h2>Add Pref label</h2>
          <input type="text" ng-model="prefLabelName" placeholder="name">
          <input type="text" ng-model="prefLabelLang" placeholder="lang code">
          <button id="showFormAddPrefLabel" ng-click="callAction('showFormAddPrefLabel', prefLabelName, prefLabelLang)" class="btn btn-xs">open
          </button>
        </div>
        <div>
          <h2>Add Alt label</h2>
          <input type="text" ng-model="altLabelName" placeholder="name">
          <input type="text" ng-model="altLabelLang" placeholder="lang code">
          <input type="text" ng-model="altTypeUri" placeholder="type uri">
          <button id="showFormAddAltLabel" ng-click="callAction('showFormAddAltLabel', altLabelName, altLabelLang, altTypeUri, true)" class="btn btn-xs">open
          </button>
        </div>
        <div>
          <h2>Add Multiple Alt label</h2>
          <textarea ng-model="altMultiLabelName" placeholder="Labels (One per row)"></textarea>
          <input type="text" ng-model="altMultiLabelLang" placeholder="lang code">
          <input type="text" ng-model="altMultiLabelType" placeholder="type uri">
          <button id="showFormAddMultipleAltLabel" ng-click="callAction('showFormAddMultipleAltLabel', altMultiLabelName.split('\n'), altMultiLabelLang, altMultiLabelType)" class="btn btn-xs">open
          </button>
        </div>

        <div>
          <h2>Add Related</h2>
          <input type="text" ng-model="relatedTypeUri" placeholder="type uri">
          <input type="text" ng-model="relatedTargetUri" placeholder="target uri">
          <input type="text" ng-model="relatedTargetName" placeholder="target name">
          <button id="showFormAddRelated" ng-click="callAction('showFormAddRelated', relatedTypeUri, relatedTargetUri, relatedTargetName)" class="btn btn-xs">open
          </button>
        </div>
        <div>
          <h2>Add Broader</h2>
          <input type="text" ng-model="broaderTypeUri" placeholder="type uri">
          <input type="text" ng-model="broaderTargetUri" placeholder="target uri">
          <input type="text" ng-model="broaderTargetName" placeholder="target name">
          <button id="showFormAddBroader" ng-click="callAction('showFormAddBroader', broaderTypeUri, broaderTargetUri, broaderTargetName)" class="btn btn-xs">open
          </button>
        </div>
        <div>
          <h2>Add Narrower</h2>
          <input type="text" ng-model="narrowerTypeUri" placeholder="type uri">
          <input type="text" ng-model="narrowerTargetUri" placeholder="target uri">
          <input type="text" ng-model="narrowerTargetName" placeholder="target name">
          <button id="showFormAddNarrower" ng-click="callAction('showFormAddNarrower', narrowerTypeUri, narrowerTargetUri, narrowerTargetName, true)" class="btn btn-xs">open
          </button>
        </div>


      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingFive">
      <h4 class="panel-title">
        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
          Test demo
        </a>
      </h4>
    </div>
    <div id="collapseFive" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFive">
      <div class="panel-body">
          <h3>Get Property</h3>
          <input type="text" ng-model="propertyURI" placeholder="property uri">
          <button class="btn btn-primary btn-xs" ng-click="getValueForProperty(propertyURI)">load real data</button>
          <pre ng-if="data['propertyResults']" style="max-height: 250px;" class="bg-success">{{ data["propertyResults"] | json }}</pre>
          <pre ng-if="data['propertyError']" class="bg-danger">{{ data["propertyError"]  | json}}</pre>
        
      </div>
    </div>
  </div>
</div>




</body></html>